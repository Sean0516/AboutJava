关键字volatile可以用来修饰字段 ，就是告知任何程序对该变量的访问均需要从共享内存中获取，而对他的改变必须同步刷新回共享内存，他能保证所有线程对变量访问的可见性  ，以及 防止指令的重排序 （在单例模式代码可以看到） 


使用volatile 关键字增加了实例变量在多个线程之间的可见性，但是volatile关键字最致命的缺点是不支持原子性 ，对于多个线程访问同一个实例变量时还是需要加锁同步

关键字volatile会指示JVM 这个变量是不稳定的 ，提示线程每次从共享内存中读取变量，而不是从私有变量中读取，这样就保证了同步数据的可见性，但是如果要修改实例变量中的数据 比如 i++ 这样的操作并不是原子操作，是非线程安全的。volatile关键字并不具有处理数据的原子性，而是强制对数据的读写及时影响到主内存


### volatile 变量读/写 的内存语义
当写一个volatile变量时，JMM 会把该线程对应的本地内存中的共享变量刷新到主内存中

当读一个volatile变量时，JMM会把该线程对应的本地内存置于无效，线程接下来会从主内存中读取共享变量

总的来说 ：线程A 写一个volatile变量实质上时线程A向接下来将要读取这个volatile变量的线程发出了（线程A 对这个volatile共享变量做修改的）

消息线程B 读取一个volatile变量 ，实质上时线程B 接收了之前某个线程发出的（在写这个volatile变量之前对共享变量锁做的修改的）消息

